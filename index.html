<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VW Convertor — px to vw 단위 자동 변환 도구</title>
    <meta name="description" content="CSS px 단위를 vw 단위로 실시간 자동 변환해주는 전문가용 도구입니다. 기준 너비와 소수점 정밀도를 자유롭게 설정하고, 파일 업로드 및 다운로드를 통해 효율적으로 반응형 웹을 개발하세요.">
    <meta name="keywords" content="px to vw, CSS 변환기, vw 계산기, 반응형 웹 디자인 도구, 프론트엔드 퍼블리싱, 단위 변환기, vw convertor">
    <meta name="author" content="R00neyj">
    
    <link rel="manifest" href="/manifest.webmanifest" />
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="VW Conv" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="VW Convertor — px to vw 단위 자동 변환 도구">
    <meta property="og:description" content="CSS의 px 수치를 디자인 가이드 기준 vw로 실시간 변환하세요. 애플 스타일의 세련된 UI와 강력한 파일 처리 기능을 제공합니다.">
    <meta property="og:image" content="https://your-domain.com/og-image.jpg"> <!-- TODO: 상징적인 이미지 경로 -->
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="VW Convertor — px to vw 단위 자동 변환 도구">
    <meta property="twitter:description" content="프론트엔드 개발자를 위한 가장 빠르고 아름다운 vw 변환기.">
    
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <style>
        :root {
            --apple-bg: #ffffff;
            --apple-card: rgba(255, 255, 255, 0.7);
            --apple-text: #1D1D1F;
            --apple-text-secondary: #86868B;
            --apple-blue: #0071E3;
            --apple-border: rgba(0, 0, 0, 0.05);
            --radius: 22px;
            --header-bg: rgba(255, 255, 255, 0.8);
            --input-bg: rgba(0, 0, 0, 0.05);
            --control-bg: rgba(255, 255, 255, 0.9);
        }

        [data-theme="dark"] {
            --apple-bg: #000000;
            --apple-card: rgba(28, 28, 30, 0.7);
            --apple-text: #F5F5F7;
            --apple-text-secondary: #8E8E93;
            --apple-blue: #FF9F0A; /* Apple System Orange */
            --apple-border: rgba(255, 255, 255, 0.1);
            --header-bg: rgba(28, 28, 30, 0.8);
            --input-bg: rgba(255, 255, 255, 0.1);
            --control-bg: rgba(60, 60, 65, 0.9);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            letter-spacing: -0.02em;
            transition: background-color 0.4s ease, color 0.4s ease, border-color 0.4s ease, box-shadow 0.4s ease, backdrop-filter 0.4s ease;
        }

        body {
            font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
            background-color: var(--apple-bg); /* Keeping minimal bg color for readability */
            color: var(--apple-text);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* --- Focus Rings with dynamic color --- */
        .editor-container:focus-within {
            border-color: var(--apple-blue);
            box-shadow: 0 0 0 3px rgba(255, 159, 10, 0.15), 0 8px 30px rgba(0, 0, 0, 0.04);
            background: var(--control-bg);
        }

        [data-theme="light"] .editor-container:focus-within {
            box-shadow: 0 0 0 3px rgba(0, 113, 227, 0.15), 0 8px 30px rgba(0, 0, 0, 0.04);
        }

        .input-wrapper:focus-within { 
            border-color: var(--apple-blue); 
            box-shadow: 0 0 0 3px rgba(255, 159, 10, 0.15); 
        }

        [data-theme="light"] .input-wrapper:focus-within { 
            box-shadow: 0 0 0 3px rgba(0, 113, 227, 0.15); 
        }

        /* --- Header Styles --- */
        header {
            position: fixed;
            top: 16px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            background: var(--header-bg);
            backdrop-filter: saturate(180%) blur(20px);
            -webkit-backdrop-filter: saturate(180%) blur(20px);
            border: 0.5px solid var(--apple-border);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.06);
            border-radius: 30px; /* Slightly increased for taller header */
            width: calc(100% - 32px);
            max-width: 900px;
            max-height: 60px; /* Increased from 52px */
            transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1), width 0.4s ease, border-radius 0.4s ease;
            overflow: hidden;
        }

        header.expanded {
            max-height: 280px;
            border-radius: 32px;
        }

        .header-content {
            height: 60px; /* Matches header max-height */
            padding: 0 28px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }

        .logo { font-size: 19px; font-weight: 600; letter-spacing: -0.03em; }

        .controls { display: flex; align-items: center; gap: 12px; }

        .settings {
            display: flex;
            align-items: center;
            gap: 20px;
            background: var(--input-bg);
            padding: 6px 6px 6px 18px;
            border-radius: 20px;
            height: 42px;
            transition: all 0.4s ease;
        }

        .setting-item { display: flex; align-items: center; gap: 10px; }
        .setting-item label { font-size: 11px; color: var(--apple-text); font-weight: 800; text-transform: uppercase; letter-spacing: 0.03em; }

        .input-wrapper {
            display: flex;
            align-items: center;
            background: var(--control-bg);
            padding: 0 10px;
            height: 30px;
            border-radius: 12px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.08);
            border: 1.5px solid transparent;
            transition: all 0.2s ease;
        }
        .input-wrapper:focus-within { border-color: var(--apple-blue); box-shadow: 0 0 0 3px rgba(0, 113, 227, 0.15); }

        input {
            border: none; background: transparent; outline: none; text-align: center;
            font-family: "SF Mono", monospace; font-size: 15px; font-weight: 700; color: var(--apple-blue);
        }
        #baseWidth { width: 65px; }
        #precision, #precisionMobile { width: 40px; }

        .unit { font-size: 11px; font-weight: 600; color: var(--apple-text-secondary); }

        .theme-toggle, .mobile-menu-toggle {
            width: 42px; height: 42px; border-radius: 50%; background: var(--input-bg);
            border: none; cursor: pointer; display: flex; align-items: center; justify-content: center;
            color: var(--apple-text); transition: all 0.2s ease;
        }
        .theme-toggle:hover, .mobile-menu-toggle:hover { background: var(--apple-border); }
        
        .theme-toggle .material-symbols-rounded, .mobile-menu-toggle .material-symbols-rounded {
            font-size: 24px;
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
            transition: transform 0.4s ease;
        }
        
        header.expanded .mobile-menu-toggle .material-symbols-rounded { transform: rotate(90deg); }

        .mobile-menu-toggle { display: none; }

        .mobile-expanded-content {
            opacity: 0;
            visibility: hidden;
            padding: 8px 24px 16px; /* Reduced and balanced padding */
            display: flex;
            flex-direction: column;
            gap: 0; /* Gap removed */
            border-top: 0.5px solid var(--apple-border);
            transition: all 0.3s ease;
            transform: translateY(-10px);
        }

        header.expanded .mobile-expanded-content { 
            opacity: 1; 
            visibility: visible; 
            transform: translateY(0);
        }

        .mobile-expanded-content .setting-item {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0; /* Vertical padding instead of gap */
        }

        .mobile-expanded-content .input-wrapper {
            width: 80px;
            justify-content: center;
        }

        /* --- Main Content Styles --- */
        main { flex: 1; display: flex; gap: 20px; padding: 110px 30px 30px; max-width: 1400px; margin: 0 auto; width: 100%; }

        .editor-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--apple-card);
            backdrop-filter: blur(30px) saturate(150%);
            -webkit-backdrop-filter: blur(30px) saturate(150%);
            border-radius: var(--radius);
            padding: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--apple-border);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .editor-container:focus-within {
            border-color: var(--apple-blue);
            box-shadow: 0 0 0 4px rgba(0, 113, 227, 0.1), 0 12px 40px rgba(0, 0, 0, 0.08);
            background: rgba(255, 255, 255, 0.6);
        }

        [data-theme="dark"] .editor-container:focus-within {
            background: rgba(44, 44, 46, 0.6);
            box-shadow: 0 0 0 4px rgba(255, 159, 10, 0.1), 0 12px 40px rgba(0, 0, 0, 0.08);
        }

        .editor-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .editor-label { font-size: 12px; font-weight: 700; color: var(--apple-text); text-transform: uppercase; letter-spacing: 0.02em; }

        textarea {
            flex: 1; width: 100%; border: none; background: transparent; resize: none;
            font-family: "SF Mono", monospace; font-size: 16px; line-height: 1.6; outline: none; color: var(--apple-text);
        }
        #output { color: var(--apple-blue); }

                .btn-copy, .btn-secondary, .btn-icon {

                    padding: 6px 14px;

                    font-size: 12px;

                    font-weight: 500;

                    border: none;

                    border-radius: 20px;

                    cursor: pointer;

                    transition: all 0.2s ease;

                    display: flex;

                    align-items: center;

                    justify-content: center;

                    gap: 6px;

                }

        

                .btn-icon {

                    padding: 0;

                    width: 34px;

                    height: 34px;

                    border-radius: 50%;

                    background-color: var(--input-bg);

                    color: var(--apple-text);

                }

        

                .btn-icon .material-symbols-rounded {

                    font-size: 20px;

                }

        

                .btn-icon:hover {

                    background-color: var(--apple-border);

                }
        .btn-copy { background-color: var(--apple-blue); color: white; }
        .btn-secondary { background-color: var(--input-bg); color: var(--apple-text); }
        .btn-copy:hover { background-color: #0077ED; }
        .btn-secondary:hover { background-color: var(--apple-border); }

        .editor-container.drag-over { border: 2px dashed var(--apple-blue); background: rgba(0, 113, 227, 0.05); }

        footer { padding: 24px; text-align: center; font-size: 12px; color: var(--apple-text-secondary); border-top: 0.5px solid var(--apple-border); }
        footer a { color: var(--apple-text); text-decoration: none; font-weight: 500; }

        .toast {
            position: fixed; bottom: 40px; left: 50%; transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(10px); color: white;
            padding: 10px 24px; border-radius: 30px; font-size: 14px; opacity: 0; transition: all 0.4s; z-index: 1000;
        }

        /* --- Responsive Styles --- */
        @media (max-width: 768px) {
            .mobile-menu-toggle { display: flex; }
            header.expanded .mobile-menu-toggle { opacity: 0; visibility: hidden; width: 0; margin-left: 0; pointer-events: none; }
            
            .theme-toggle, .desktop-precision { display: none; }
            .controls { flex: 1; justify-content: flex-end; }
            
            .settings { padding: 4px 4px 4px 14px; height: 38px; }
            header.expanded .settings { background: transparent; padding-right: 0; flex: 1; justify-content: flex-end; }
            .settings input { width: 55px; font-size: 14px; }

            main { flex-direction: column; padding-top: 110px; padding-left: 16px; padding-right: 16px; }
            .editor-header { flex-direction: column; align-items: flex-start; gap: 12px; }
            .editor-header div { width: 100%; display: flex; }
            .btn-copy, .btn-secondary { flex: 1; justify-content: center; }
        }
    </style>
</head>
<body data-theme="light">
    <header id="mainHeader">
        <div class="header-content">
            <div class="logo">VW Convertor</div>
            <div class="controls">
                <div class="settings">
                    <div class="setting-item">
                        <label for="baseWidth">Base</label>
                        <div class="input-wrapper">
                            <input type="number" id="baseWidth" value="1920" min="1">
                            <span class="unit">px</span>
                        </div>
                    </div>
                    <div class="setting-item desktop-precision">
                        <label for="precision">Decimals</label>
                        <div class="input-wrapper">
                            <input type="number" id="precision" value="4" min="0" max="10">
                        </div>
                    </div>
                </div>
                <button class="theme-toggle" id="themeToggleDesktop" title="Toggle Theme">
                    <span class="material-symbols-rounded sun" style="display:none;">light_mode</span>
                    <span class="material-symbols-rounded moon">dark_mode</span>
                </button>
                <button class="mobile-menu-toggle" id="mobileMenuBtn">
                    <span class="material-symbols-rounded">settings</span>
                </button>
            </div>
        </div>
        <div class="mobile-expanded-content" id="mobileExpanded">
            <div class="setting-item">
                <label for="precisionMobile">Decimals</label>
                <div class="input-wrapper">
                    <input type="number" id="precisionMobile" value="4" min="0" max="10">
                </div>
            </div>
            <div class="setting-item" style="border-top: 0.5px solid var(--apple-border); padding-top: 16px; margin-top: 4px;">
                <label>Appearance</label>
                <button class="btn-secondary" id="themeToggleMobile" style="padding: 6px 16px; border-radius: 12px; font-size: 13px; font-weight: 600;">
                    <span id="themeTextMobile">Dark Mode</span>
                </button>
            </div>
        </div>
    </header>

    <main>
        <section class="editor-container" id="dropZone">
            <div class="editor-header">
                <span class="editor-label">CSS Input <small style="text-transform: none; font-size: 11px; font-weight: 500; opacity: 0.8; margin-left: 10px; color: var(--apple-text-secondary);">— 직접 입력 또는 파일 드래그</small></span>
                <div style="display: flex; gap: 8px;">
                    <button class="btn-icon" onclick="resetAll()" title="Reset (Clear everything)">
                        <span class="material-symbols-rounded">delete</span>
                    </button>
                    <button class="btn-icon" onclick="document.getElementById('fileInput').click()" title="Upload CSS file">
                        <span class="material-symbols-rounded">upload_file</span>
                    </button>
                    <input type="file" id="fileInput" accept=".css" style="display: none;">
                </div>
            </div>
            <textarea id="input" spellcheck="false" placeholder="이곳에 CSS 코드를 직접 붙여넣거나, .css 파일을 끌어다 놓으세요."></textarea>
        </section>

        <section class="editor-container">
            <div class="editor-header">
                <span class="editor-label">Result (vw)</span>
                <div style="display: flex; gap: 8px;">
                    <button class="btn-icon" onclick="downloadResult()" title="Download as .css file">
                        <span class="material-symbols-rounded">download</span>
                    </button>
                    <button class="btn-copy" onclick="copyResult()">
                        <span class="material-symbols-rounded" style="font-size: 18px;">content_copy</span>
                        Copy
                    </button>
                </div>
            </div>
            <textarea id="output" readonly spellcheck="false" placeholder="변환된 결과가 여기에 표시됩니다..."></textarea>
        </section>
    </main>

    <footer>
        <p>Made by <strong>R00neyj</strong> &nbsp;•&nbsp; <a href="https://github.com/your-username/vw_convertor" target="_blank">View on GitHub</a></p>
    </footer>

    <div id="toast" class="toast">Copied to clipboard</div>

    <script>
        const inputEl = document.getElementById('input');
        const outputEl = document.getElementById('output');
        const baseWidthEl = document.getElementById('baseWidth');
        const precisionEl = document.getElementById('precision');
        const precisionMobileEl = document.getElementById('precisionMobile');
        const toastEl = document.getElementById('toast');
        const headerEl = document.getElementById('mainHeader');
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');

        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            const themeTextMobile = document.getElementById('themeTextMobile');
            if (theme === 'dark') {
                document.querySelectorAll('.sun').forEach(s => s.style.display = 'block');
                document.querySelectorAll('.moon').forEach(m => m.style.display = 'none');
                if(themeTextMobile) themeTextMobile.textContent = 'Light Mode';
            } else {
                document.querySelectorAll('.sun').forEach(s => s.style.display = 'none');
                document.querySelectorAll('.moon').forEach(m => m.style.display = 'block');
                if(themeTextMobile) themeTextMobile.textContent = 'Dark Mode';
            }
        }

        const savedTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        setTheme(savedTheme);

        [document.getElementById('themeToggleDesktop'), document.getElementById('themeToggleMobile')].forEach(btn => {
            btn.addEventListener('click', () => {
                const current = document.documentElement.getAttribute('data-theme');
                setTheme(current === 'dark' ? 'light' : 'dark');
            });
        });

        mobileMenuBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            headerEl.classList.toggle('expanded');
        });

        // Close header when clicking outside
        document.addEventListener('click', (e) => {
            if (headerEl.classList.contains('expanded') && !headerEl.contains(e.target)) {
                headerEl.classList.remove('expanded');
            }
        });

        // Prevent closing when clicking inside the expanded content
        headerEl.addEventListener('click', (e) => {
            e.stopPropagation();
        });

        function syncPrecision(e) {
            const val = e.target.value;
            precisionEl.value = val;
            precisionMobileEl.value = val;
            convert();
        }
        precisionEl.addEventListener('input', syncPrecision);
        precisionMobileEl.addEventListener('input', syncPrecision);

        function convert() {
            const input = inputEl.value;
            const baseWidth = parseFloat(baseWidthEl.value) || 1920;
            const precision = parseInt(precisionEl.value);
            const finalPrecision = isNaN(precision) ? 4 : Math.min(Math.max(precision, 0), 10);
            const result = input.replace(/(-?\d+\.?\d*)px/g, (match, p1) => {
                const pxValue = parseFloat(p1);
                if (pxValue === 0) return '0px';
                return parseFloat(((pxValue / baseWidth) * 100).toFixed(finalPrecision)) + 'vw';
            });
            outputEl.value = result;
        }

        function showToast(msg) { toastEl.textContent = msg; toastEl.style.opacity = '1'; setTimeout(() => toastEl.style.opacity = '0', 2000); }
        function resetAll() { if(confirm('초기화하시겠습니까?')) { inputEl.value = outputEl.value = ""; showToast('Cleared'); } }
        function copyResult() { navigator.clipboard.writeText(outputEl.value).then(() => showToast('Copied')); }
        function downloadResult() {
            const blob = new Blob([outputEl.value], {type: 'text/css'});
            const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'converted.css'; a.click();
        }

        inputEl.addEventListener('input', convert);
        baseWidthEl.addEventListener('input', convert);
        inputEl.value = `/* Sample */\n.hero { width: 1920px; padding: 40px; }`;
        convert();
    </script>
</body>
</html>
